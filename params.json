{"name":"Storage-wars","tagline":"Experiment med IndexedDB","body":"# IndexedDB och Application Cache experiment och anteckningar\r\n\r\n```\r\n$ cd your_repo_root/repo_name\r\n$ git fetch origin\r\n$ git checkout gh-pages\r\n```\r\n\r\n## IndexedDB\r\n\r\nEn databas som sitter på klientsidan i webbläsaren. Den gör offline läge möjligt och kan även användas för att göra online applikationer mycket snabbare. Den är i NoSQL stil, där man lagrar objekt istället för records eller rader. Den är transaktionsbaserad.\r\n\r\n### Vad finns det för problem?\r\n\r\nAPI-en är inte samma på varje webbläsaren, och inte hellre samma på varje version av en webbläsare. Så det är svårt att använda IndexedDB för en cross-browser app och appen kan sluta fungera om användaren uppdaterar sin webbläsare. I skrivande stund funkar den inte på Safari, Opera, iOS, Opera Mobile eller Android Browser.\r\n\r\n### Hur söker man i databasen?\r\n\r\nIndexedDB kan själv inte sökas med den slags queries man använder i SQL, till exempel \"Hitta alla objekt som matchar en visst set\" eller \"Hitta alla objekt som innehåller 'Sodra'\" eller logiska OR eller AND.\r\n\r\n### Vad händer om en databas request (read eller write) misslyckas?\r\n\r\nwindow.indexedDB.onerror() event triggers. Databasen rullas tillbaka och din Javascript kan hantera felet med en callback funktion till onerror() event. Du kan också avbryta en request (om det tar för lång tid till exempel) med en transaction.abort() metod, och den ska rullas tillbaka.\r\n\r\n### Hur bra är IndexedDB med att hantera stora mängder data?\r\n\r\nDet kan gå långsamt och eftersom Javascript är så klart single-threaded, hela appen kan hänga sig. Man kan förmodligen fixa concurrency med en Web Worker, men jag har inte testat just det ännu. Annars får man fixa en overlay med \"Vi jobbar på saken\" meddelande medan den jobbar med databasen. Med transaction.abort() metod kan vi ge användaren en knapp för att avbryta och rullar tillbaka.\r\n\r\n### Hur mycket data kan man lagra i IndexedDB?\r\n\r\nMan börjar med 10MB. Om det blir större ska webbläsaren fråga användaren för tillstånd att använda mer. Oavsett tillstånd kan det aldrig vara mer än 250MB. OBS! Ingen error kommer ifall man överstiger 250MB.\r\n\r\n### Hur smidigt är felhanteringen?\r\n\r\nGanska smidigt. Fel bubblar upp, så man slipper hantera fel för varje request objekt, utan att man kan fixa fel till själva transaction eller databas objekt.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}